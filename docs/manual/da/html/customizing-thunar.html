<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Tilpasning af Thunar</title><link rel="stylesheet" href="../thunar.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><link rel="start" href="index.html" title="Thunar filhåndtering"><link rel="up" href="index.html" title="Thunar filhåndtering"><link rel="prev" href="preferences.html" title="Indstillinger til filhåndtering"><link rel="next" href="advanced-topics.html" title="Avancerede emner"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Tilpasning af Thunar</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="preferences.html">forrige</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="advanced-topics.html">næste</a></td></tr></table><hr></div><div class="sect1" lang="da"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="customizing-thunar"></a>Tilpasning af Thunar</h2></div></div></div><p>Dette kapitel beskriver hvordan du ændrer bestemte dele af filhåndteringen for tilpasse den til dit behov.</p><div class="sect2" lang="da"><div class="titlepage"><div><div><h3 class="title"><a name="sendto"></a>"Send til"-menuen</h3></div></div></div><p>Thunar inkluderer en <span class="guilabel"><strong>Send til</strong></span>-menu, der tilbyder mulige destinationer som filer og mapper kan sendes til. For at tilgå <span class="guilabel"><strong>Send til</strong></span>-menuen, skal du vælge </p><div class="screenshot"><div class="mediaobject"><img src="images/sendto-menu.png" alt='"Send til"-menu'></div></div><p>Som standard indeholder <span class="guilabel"><strong>Send til</strong></span>-menuen, et punkt der hedder <span class="guilabel"><strong>Skrivebord (opret henvisning)</strong></span> til alle filer og mapper, som simpelthen opretter en henvisning til den valgte fil på skrivebordet. Derudover hvis <span class="guilabel"><strong>Genvejspanelet</strong></span> er aktivt, vil menuen også inkludere et punkt der hedder <span class="guilabel"><strong>Sidepanel (opret henvisning)</strong></span> til mapper, der tillader brugere at tilføje nye genveje til sidepanelet.  Efter disse punkter vil <strong class="application"><code>Thunar</code></strong> vise flytbare drev der for øjeblikket, er tilsluttet computeren. I det ovenstående skærmbillede repræsenterer <span class="guilabel"><strong></strong></span> en mulig destination for hvor filerne kan sendes til. BemSend til-menuen, s</p><p>Derudover bliver <strong class="application"><code>Thunar</code></strong> også leveret med <strong class="application"><code>thunar-sendto-email</code></strong>-udvidelsesmodulet, der tilføjer punktet <span class="guilabel"><strong>E-postmodtager</strong></span> til menuen, som så åbner e-postprogrammet med den valgte fil vedhæftet meddelelsen. Hvis markeringen indeholder mindst en mappe, vil de valgte elementer blive pakket ned i en ZIP-fil før de er vedhæftet meddelelsen. Modsat, hvis markeringen indeholder flere filer, eller en enkelt fil som er større end 200Kib, vil brugeren blive spurgt om filerne skal pakkes ned i og sendes som en ZIP-fil.</p><p>Ligesom de fleste funktioner i <strong class="application"><code>Thunar</code></strong>, kan <span class="guilabel"><strong>Send til</strong></span>-menuen nemt udvides af brugere og programudviklere med nye destinationer, ved at bruge <a class="ulink" href="http://freedesktop.org/wiki/Standards_2fdesktop_2dentry_2dspec" target="_top">desktop entry files</a>. Disse filer skal installeres i en af <code class="filename">$XDG_DATA_DIRS/Thunar/sendto/</code> mapperne (see the <a class="ulink" href="http://freedesktop.org/wiki/Standards_2fbasedir_2dspec" target="_top">XDG Base Directory Specification</a> for detaljer om <code class="literal">$XDG_DATA_DIRS</code> variable).</p><p>Destinationens <code class="literal">Mime-type&gt; <code class="filename">.desktop</code> angiver hvilke type filer der skal være til rådighed i <span class="guilabel"><strong>Send til</strong></span>-menuen. F.eks. hvis du vil tilføje et punkt for et <a class="ulink" href="http://flickr.com/" target="_top">Flickr</a> overførselsværktøj, så vil dette punkt kun vises hvis markeringen indeholder JPEG-filer (andre filformater er ikke understøttet af Flickr) og du ville så skulle tilføje en linie som <code class="literal">MimeType=image/jpeg;</code>. Hvis du ikke angiver nogen <code class="literal">MimeType</code> vil punktet blive vist for alle filtyper.</code></p><p>Et komplet eksempel ved brug af <strong class="application"><code>postr</code></strong>-progammet, er vist forneden:</p><pre class="programlisting">
# postr.desktop - Integrér postr i
#                  "Send til"-menuen.
[Desktop Entry]
Type=Application
Version=1.0
Encoding=UTF-8
TryExec=postr
Exec=postr %F
Icon=postr
Name=Flickr
MimeType=image/jpeg;</pre><p>Hvis du installerer denne fil i <code class="filename">~/.local/share/Thunar/sendto/</code> (opret mappen hvis den endnu ikke findes) <span class="guilabel"><strong>Send til</strong></span>-menuen for JPEG-filer vil vise det nye punkt, <span class="guilabel"><strong>Flickr</strong></span>, som kan bruges til at overføre JPEG-billeder til Flickr.</p><p><a class="ulink" href="http://thunar.xfce.org/pwiki/documentation/sendto_menu" target="_top">Thunar projektets Wiki</a> indeholder forskellige eksempler på brugbare destinationer til <span class="guilabel"><strong>Send til</strong></span>-menuen. Du er velkommen til at udvide Wikisiden med nye eksempler.</p></div><div class="sect2" lang="da"><div class="titlepage"><div><div><h3 class="title"><a name="thumbnailers"></a>Miniaturegenererer</h3></div></div></div><p>Thunar bruger små værktøjer til at oprette miniaturer af bestemte filtyper og viser miniaturerne som forhåndsvisning af filindholdet. Disse små værktøjer bliver kaldt miniaturegenererer. Thunar bliver leveret med miniaturegenererer for billed- og skrifttypefiler, og gør automatisk brug af de installerede miniaturegenererer fra GNOME, hvis den er installeret med understøttelse af <code class="literal">gconf</code>. Brugere kan løbende udvide denne grundlæggende funktionalitet med miniaturegenererer til andre filtyper.</p><p>Hvis du planlægger at skrive en brugerdefineret miniaturegenerer, skal du starte med et program der accepterer mindst to kommandolinjeparametre, inddatafilen, som er af den filtype du vil understøtte og uddatafilen, som er en PNG-fil der oversættes med det format angivet af <a class="ulink" href="http://jens.triq.net/thumbnail-spec/creation.html#AEN139" target="_top">Standard for miniaturehåndtering</a>. Derudover må dit program også acceptere den ønskede størrelse på miniaturen, som er valgfri men højt anbefalet. Hvis du skriver uddatafilen til en vilkårlig billedstørrelse, vil Thunar derefter skalere det til den ønskede størrelse, hvilket muligvis gør at der bliver produceret et mindre optimalt resultat end hvis miniaturen var oprettet med de anmodede mål.</p><p>Når først dit værktøj til at generere miniaturer er færdigt, skal du registrere din miniaturegenererer, så Thunar kan finde og bruge det. Derfor, alt du skal gøre er at installere en beskrivelsesfil til miniaturegenereren (en <code class="filename">.desktop</code> fil) i en de <code class="filename">$XDG_DATA_DIRS/thumbnailers/</code> stier. F.eks. hvis du kun vil registrere miniaturegenereren til din brugerkonto, kan du installere filen i denne mappe <code class="filename">~/.local/share/thumbnailers/</code>.  <code class="filename">.desktop</code> for miniaturegenererer har det følgende format.</p><div class="sect3" lang="da"><div class="titlepage"><div><div><h4 class="title"><a name="thumbnailer-desktop-file-format"></a>Filformatbeskrivelse til miniaturegenererer</h4></div></div></div><p>Miniaturegenerererbeskrivelsesfiler bruger <a class="ulink" href="http://standards.freedesktop.org/desktop-entry-spec/latest/" target="_top">Desktop Entry Formatet</a> med en særlig <code class="literal">type</code> af <code class="literal">X-miniaturegenererer</code> og et særligt felt,<code class="literal">X-Thumbnailer-Exec</code> med nye feltkoder. Grundlæggende har en miniaturegenerererbeskrivelsesfil, det følgende format.</p><pre class="programlisting">
[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=X-Thumbnailer
Name=Din-miniaturegenererer
MimeType=din-understøttede/MIME-type;
X-Thumbnailer-Exec=din-miniaturegenererer %i %o %s</pre><p><code class="literal">Versionen</code> og <code class="literal">indkodning</code> er foreskrevet af Desktop Entry specifikationen, brug blot de værdier der er vist i det ovenstående eksempel. <code class="literal">Type</code>feltet skal have den bestemte værdi <code class="literal">X-Thumbnailer</code>, ellers vil din miniature ikke blive genkendt. <code class="literal">Navne</code>værdien beskriver din miniature.</p><p><code class="literal">X-Thumbnailer-Exec</code> feltet indeholder kommandoen til at køre din miniature, og understøtter særlige feltkoder der bliver erstattet når miniaturen køres. De genkendte feltkoder er følgende:</p><div class="variablelist"><dl><dt><span class="term"><code class="varname">%i</code></span></dt><dd>Den lokale sti til inddatafilen til oprettelsen af miniaturevisning, kan entet være en sti relativ til mappen hvor miniaturegenereren blev kørt, eller en fuld sti.</dd><dt><span class="term"><code class="varname">%o</code></span></dt><dd>Den lokale sti til uddatafilen, hvor den oprettede miniature skal gemmes. Uddatafilen skal gemmes som en gyldig PNG-fil i overensstemmelse med miniaturestandarden. (se overnstående). Bemærk at stien ikke må ende med <code class="literal">.png</code>, som har en betydning hvis du kører særlige tredjepartsprogrammer.</dd><dt><span class="term"><code class="varname">%s</code></span></dt><dd>Den ønskede størrelse på den generede miniature i pixels. Den parameter er valgfri.</dd><dt><span class="term"><code class="varname">%u</code></span></dt><dd>Ligesom <code class="literal">%i</code>, men erstattet med URI'en af filen, fremfor stien. Dette blev tilføjet for at gøre det mere kompatibelt med GNOME.</dd><dt><span class="term"><code class="varname">%%</code></span></dt><dd>Vil blive erstattet med en enkelt <code class="literal">%</code>.</dd></dl></div><p>Du skal inkludere mindst <code class="literal">%o</code> og <code class="literal">%i</code> eller <code class="literal">%u</code>, ellers vil din miniaturegenererer være ubrugelig.</p><p><code class="literal">MIME-typen</code> viser MIME-typerne - adskilt af et semikolon - for hvilke din miniaturegenererer er i stand til at vise forhåndsvisninger.</p></div><div class="sect3" lang="da"><div class="titlepage"><div><div><h4 class="title"><a name="eps-thumbnailer-example"></a>EPS miniaturegenererer-eksempel</h4></div></div></div><p>Dette eksempel demonsterer hvordan man skriver og installerer en ny miniaturegenererer til <code class="filename">.eps</code>-filer, som bruger <span class="command"><strong>convert</strong></span>-værktøjet der bliver leveret som en del af ImageMagick. Vi begynder først med et simpelt skript der kører <span class="command"><strong>convert</strong></span> for at generere en miniature i den ønskede størrelse.</p><pre class="programlisting">
#!/bin/sh
#
# eps-thumbnailer - Eksempel på miniaturegenerererskript for EPS-filer.
#
# Anvendelse: esp-thumbnailer eps-file png-file size
#

# command line parameters
ifile=$1
ofile=$2
size=$3

# kør convert (ImageMagick)
exec convert "eps:$ifile" -scale "$sizex$size" "png:$ofile"</pre><p>Gem det ovenstående skript til filen <code class="filename">eps-thumbnailer</code>, vær sikker på at den kan køres, og installér den i <code class="filename">/usr/local/bin</code>.</p><pre class="screen">
$ chmod +x eps-thumbnailer
$ sudo install eps-thumbnailer /usr/local/bin/eps-thum</pre><p>Derefter skal vi oprette miniaturegenerererbeskrivelsesfilen <code class="filename">eps-thumbnailer.desktop</code>, der ser således ud:</p><pre class="programlisting">
[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=X-Thumbnailer
Name=EPS Thumbnailer
TryExec=convert
MimeType=image/x-eps;
X-Thumbnailer-Exec=/usr/local/bin/eps-thumbnailer %i %o %s</pre><p>Denne fil skal installeres i <code class="filename">/usr/local/share/thumbnailers</code> (opret mappen hvis den ikke eksisterer).</p><pre class="screen">
$ sudo install -d /usr/local/share/thumbnailers
$ sudo install eps-thumbnailer.desktop /usr/local/share/thumbnailers/eps-thumbnailer.desktop</pre><p><code class="filename">eps-thumbnailer.desktop</code>-filen bruger den særlige knap <code class="literal">TryExec</code>, som, hvis angivet, navngiver en kommando der skal være tilstede på systemet for at miniaturegenereren er brugbar. I dette tilfælde er vores skript ubrugeligt hvis <span class="command"><strong>convert-programmet ikke er til stede.</strong></span></p><p>Det sidste skridt er at regenere mellemlageret til miniaturegenereren så Thunar kan bruge din miniaturegenererer. Mellemlageret til miniaturegenererer er lokaliseret i <code class="filename">$XDG_CACHE_HOME/Thunar/thumbnailers.cache</code> (med mindre den er overskrevet af dig eller systemadministratoren, vil <code class="varname">$XDG_CACHE_HOME</code> pege på mappen <code class="filename">~/.cache/</code>). Mellemlageret til miniaturegenereren er periodisk regenereret af Thunar, men du kan tvinge den til at regenerere det ved at køre <code class="filename">thunar-vfs-update-thumbnailers-cache-1</code>-værktøjet, der bliver leveret som en del af Thunar. Dette værktøj er som regel installeret i <code class="filename">libexec</code> i din installationssti (<code class="filename">sbin</code> på Debian/Ubuntu). Så f.eks. hvis Thunar er installeret i <code class="filename">/usr</code>, skal du køre værktøjet således:</p><pre class="screen">$ /usr/libexec/thunar-vfs-update-thumbnailers-cache-1</pre><p>Men vær sikker på at du kører programmet fra din brugerkonto, og ikke superbrugerkontoen, da mellemlageret til miniaturegenereren er gemt i din hjemmemappe, fremfor på selve systemet.</p><p>Hvis Thunar nu er oversat med understøttelse for filændringsovervågning (ved at bruge FAM- eller Gamin tjenester, vil den automatisk bruge det nye miniaturemellemlager inden for få sekunder, og er derefter istand til at oprette miniaturevisninger ved at bruge dine egne miniaturegenererer. Ellers kan du være nødt til at genstarte Thunar ved at bruge</p><pre class="screen">$ Thunar -q</pre><p>for at lukke alle kørende udgaver, for derefter at starte den op igen fra din programstarter.</p></div><div class="sect3" lang="da"><div class="titlepage"><div><div><h4 class="title"><a name="cleaning-up-thumbnails"></a>Oprydning af miniaturevisninger</h4></div></div></div><p>De oprettede miniaturevisninger er gemt i mappen, <code class="filename">~/.thumbnails/</code> i overenstemmelse med <a class="ulink" href="http://jens.triq.net/thumbnail-spec/index.html" target="_top">Miniaturevisningsstandarden</a>. Det kan være hjælpsomt at rydde op i mellemlageret for miniaturevisninger hvis du tester en ny miniaturevisning, ved at bruge</p><pre class="screen">$ rm -rf ~/.thumbnails/</pre><p>hvilket også vil give dig noget ledigt plads i din hjemmemappe. Da alle informationer i denne mappe, automatisk blev genereret fra filerne i dit system, vil du ikke miste følsomme data.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preferences.html">forrige</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="advanced-topics.html">næste</a></td></tr><tr><td width="40%" align="left" valign="top">Indstillinger til filhåndtering </td><td width="20%" align="center"><a accesskey="h" href="index.html">hjem</a></td><td width="40%" align="right" valign="top"> Avancerede emner</td></tr></table></div></body></html>
